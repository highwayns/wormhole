# セキュリティの前提

このページでは、ワームホールがセキュリティと可用性のために依存しているさまざまな前提条件について詳しく説明します。これらの多くは
さまざまな分散型プロトコルに適用される普遍的な仮定。

このドキュメントは、VAAのようなワームホールの概念に精通していることを前提としています。

## ゴシップネットワークの可用性

ワームホールのピアツーピアゴシップネットワークは、[go-libp2p](https://github.com/libp2p/go-libp2p)と
[go-libp2p-pubsub](https://github.com/libp2p/go-libp2p-pubsub)ライブラリ。 libp2pは、多くの人が使用する非常に人気のあるライブラリです
IPFSやEthereum2.0などの主要な分散型ネットワーク。それにもかかわらず、他の分散プロトコルと同様に、
メッセージの損失を引き起こしたり、個々のノードを圧倒したりする可能性のあるさまざまなサービス拒否攻撃の影響を受けやすくなります。

可用性のためだけに、セキュリティのためにlibp2pに依存することは_ありません_。 libp2pのチャネルは、によって暗号化および認証されます
デフォルトですが、そのプロパティには依存しません。 libp2pトランスポートのセキュリティが侵害されると、最悪の場合、次のような結果になる可能性があります。
ゴシップネットワークまたは個々のノードに対するサービス拒否攻撃。

ゴシップネットワークが利用できないと、イベントが失われる可能性がありますが、永続的になることはありません。ノードは定期的に
短期的な緩和のために、コンセンサスに到達できなかったVAAの署名の再送信を試みます
ネットワークの停止。ネットワークの停止が長引くと、タイムアウトが発生し、
ノードにより、観測値が削除される可能性があります。

これに対する緩和策は、Solanaの場合のポーリング制御ループ、または他のチェーンのチェーン再生です。ソラナでは、
ノードは未処理の観測値を一貫してポーリングし、ノードによる再観測と次のラウンドを行います。
コンセンサス。チェーンの再生中に、ノードは接続されたチェーンからのイベントを特定のブロックの高さから上に再処理します。
VAAがすでにSolanaに提出されているかどうか、および見逃された観測についてコンセンサスのラウンドを開始するかどうか。
 
これにはリスクはなく、何度でも実行できます。 VAAは完全に決定論的でべき等であり、
与えられた観測は常に同じVAAボディハッシュになります。接続されているすべてのチェーンは永続的な記録を保持します
特定のVAA本体(ハッシュで識別される)がすでに実行されているかどうかを確認できるため、VAAは安全に実行できます。
それらがすべてのチェーンで実行されるまで、コンセンサスの複数のラウンドを経ます。

ブリッジはまだチェーンリプレイを実装していません(https://github.com/certusone/wormhole/issues/123を参照)。ネットワークの停止
したがって、ネットワークが長時間停止した場合、Solana以外のチェーンからの観測を見逃す可能性があります。これ
見逃したイベントに追いつくためにチェーンリプレイが実装された後、ブロックをさかのぼってリプレイすることが可能になります。

## チェーンの一貫性とファイナリティ

ワームホールネットワークは常に_外部イベント_を監視し、それ自体でそれらを開始することはありません。それは接続されたものに依存しています
チェーンのコンセンサス、セキュリティ、およびファイナリティのプロパティ。ガーディアンセットの更新の場合、オフチェーンに依存します
同じようにオペレーターのコンセンサス。

ワームホールが依存する外部チェーンプロパティの非網羅的なリスト：

-ある時点で、トランザクションは最終的なものであり、ロールバックできないと想定できます。
-特定のトランザクションは、単一のブロックに1回だけ含まれる/実行されるため、決定論的なVAA本体になります。
-アカウントのデータと状態は、デフォルトで、またはSolanaの家賃免除などのメカニズムを通じて永続的です。
-誤解はありません-指定された高さには有効なブロックが1つだけあります。

## オンチェーンスパム防止

接続されているすべてのチェーンは、攻撃者がネットワークを圧倒するのを防ぐために、料金または同様のメカニズムを使用していると想定しています。
また、ワームホールの処理能力は、接続されているすべてのチェーンの能力の合計よりも大きくなります。

Solanaはとんでもない処理能力を備えており、WebSocketよりも高速でトランザクションを処理できます。
サブスクリプションインターフェイス、エージェント、またはワームホール自体が処理できます。これは、
ワームホール契約は(非常に安い)取引手数料を超えて請求しますが、十分に動機付けられた攻撃者は
それでも、上記の料金を支払うだけで持続的な攻撃を実行します。

将来の改善の可能性は、ソラナ側の動的料金ですが、これは現在、ランタイムによってブロックされています
制限(https://github.com/certusone/wormhole/issues/125を参照)。動的な料金でも、料金を超えて引き上げる
妥当なユーザーが支払う金額は、プロトコルに対する攻撃の成功をすでに構成している可能性があります。 

分散型プロトコルに対するDDoS攻撃は、一般的にトリッキーなものであり、ほとんどの場合、ゲーム理論/インセンティブの問題です。
防衛戦略は動的であり、生態系が成長するにつれて進化します。したがって、そのような攻撃を現在から除外します
ワームホール脅威モデル。そのような攻撃を実行するインセンティブは、料金と
攻撃者が被る法的/責任リスク、および攻撃を維持するためのコストは単純なものよりも高くなる
接続されたチェーンを直接攻撃します。

##ガーディアンインセンティブの調整

ワームホールは分散型PoAブリッジです。そのゲーム理論上のセキュリティは、インセンティブを持っている厳選されたオペレーターに依存しています
Solanaエコシステムと強力に連携します-大規模なトークン所有者、エコシステムプロジェクト、トップバリデーターなど、
ネットワークを攻撃したり、ネットワークを無視したりすることで、評判、トークンの価値、生態系の成長に損害を与えるリスクがあります。
義務。

現時点では、このようなインセンティブの調整は、別のチェーンよりも簡単にブートストラップして正しく行うことができると想定しています。
これには、慎重に設計されたトークンエコノミーとスラッシュ基準が必要です。特に、気になるオペレーターを惹きつけます
短期間の検証報酬を超えた生態系について、高品質で回復力のある保護者セットをもたらします。

プロジェクトが成長するにつれて、ステーキングトークン以外に考慮すべき多くの潜在的な改善があります。
[Balsa](https://docs.google.com/document/d/1sCgxHIOrVHAqrt4NWkUJXxQvpSxq6DyZrkf4IR-R-YM/edit)保険プール
提案、および運用コストを相殺し、オペレーターに報酬を与えるDAO。

##妥協のないホスト

これは言うまでもありません-単一ノードのコンテキストでは、攻撃者はホストの読み取りまたは書き込みができないと想定しています
ノードが
ランニング。過半数のノードが侵害された場合、攻撃者は任意のVAAを生成する可能性があります。少数のノードの場合
が侵害されると、ネットワークが一時的にコンセンサスを失う可能性があります(保護者のキーを意図的に無効にする方法はありません。
それが過半数に置き換えられるのを防ぎます)。

一般に信じられていることとは異なり、ハードウェアセキュリティモジュールは、ホストに関連するリスクを大幅に変更することはありません。
暗号通貨キーを扱うときの妥協。侵害されたホストは、署名オラクルとしてHSMを簡単に悪用する可能性があります。
単一の署名で不可逆的な損傷を引き起こします。それは単に攻撃を複雑にするだけで、大きな意味ではありません。

PoS検証などの一部のユースケースでは、次のようなスマートHSMを実行することで、ホストの侵害のリスクを完全に軽減できます。
[SignOS](https://certus.one/sign-os)。このような場合、スマートHSMは署名ペイロードを解析して適用できます
「特定のブロックの高さは1回だけ署名できます」などの制約は、安全な場所で個別に検証できます
飛び地。

ワームホールのようなオラクルの場合、この制約は「ファイナライズされたイベントのみが認証される可能性がある」というものであり、これは不可能です。
マークルプルーフを検証せず、少なくともスパースヘッダーチェーンを同期せずに検証します。したがって、
ワームホール、ワームホールインスタンス全体は、スマートHSM/SignOS内で実行する必要があります。これには、
それがサポートするチェーン。

## サードパーティライブラリ

最新のソフトウェアプロジェクトと同様に、私たちは多くの外部ライブラリに依存しています。対処する際にベストプラクティスを適用しました
そのようなサードパーティの依存関係(数の最小化、バイナリ依存関係の回避、ロックファイルの使用など)
依存関係を正確なバージョンとハッシュに固定して、配布レベルの妥協を回避します。サードパーティを想定しています
私たちが使用するライブラリは安全であり、バックドアは含まれていません。

Goのサプライチェーンは、[public go.sumのおかげで、このような妥協に対して特に強化されています。
データベース](https://go.googlesource.com/proposal/+/master/design/25530-sumdb.md)。

ノードソフトウェアの暗号化については、Goの標準ライブラリの高レベルのインターフェイスにのみ依存しています。
その堅牢性で知られています-そしてgo-ethereum、どちらも徹底的に監査されています。

## Solana eBPFVMでのクラッシュの安全な処理

Solanaランタイムの命令数の制限により、Solanaコントラクトは安全でないブロックを自由に使用します
メモリセーフなアプローチのオーバーヘッドを発生させることなく、データをシリアル化および逆シリアル化するため。

これは、Solana契約開発の現在のベストプラクティスに従います。無効な操作または範囲外であると想定します
アクセスは常にクラッシュを引き起こし、バイトコードインタープリターによってキャッチされ、次のようにコントラクトの実行を安全に停止します。
契約実行中の他のエラーはそうなるでしょう。 